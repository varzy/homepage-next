---
title: "å‰åç«¯ä¸åˆ†ç¦»ï¼Œä¹Ÿè¦ä¼˜é›…å¾—å†™å‰ç«¯ï¼"
category: "Coding"
type: "Post"
status: "Published"
tags: ["JavaScript"]
date: "2021-03-13"
slug: "legacy-ssr-project-front-end-develop"
summary: ""
last_edited_time: "2024-03-16T08:21:00.000Z"
blog_last_fetched_time: "2025-08-06T03:18:08.742Z"
notion_id: "dadd4c37-7881-4ba1-99f4-cd51210c3922"
---


> ğŸ‘‰ åŸæ–‡äº 2019-10-24 å‘å¸ƒåœ¨æˆ‘çš„åšå®¢ï¼Œ2021-03-15 è¿ç§»åˆ°æ­¤å¤„


---


å®ä¸ç›¸ç’æˆ‘å·²ç»å¾ˆä¹…æ²¡æœ‰å†™è¿‡å‰åç«¯ä¸åˆ†ç¦»çš„é¡¹ç›®äº†ï¼Œå‡ ä¹éƒ½æ˜¯ `vue create xxx` ä¸€æŠŠæ¢­ã€‚æˆ‘å–œæ¬¢å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ï¼Œå¥½å¤„æ˜¯ä¸ä¼šç›¸äº’å¹²æ‰°ï¼Œå„å¹²å„çš„ï¼Œå‰ç«¯ä¸éœ€è¦è£… PHP æˆ–è€… Python æ‰èƒ½æŠŠé¡¹ç›®è·‘èµ·æ¥ï¼Œåç«¯ä¹Ÿä¸éœ€è¦å†å»å¥—æ¨¡æ¿æ¸²æŸ“æ•°æ®ã€‚ä½†å¾€å¾€å¤„äº SEO ç­‰å„ç§éœ€æ±‚ï¼Œæœ‰äº›é¡¹ç›®è¿˜çœŸå°±ä¸èƒ½å‰åç«¯åˆ†ç¦»äº†äº‹ï¼Œè¿™ç§æƒ…å†µä¸‹æ€ä¹ˆä¼˜é›…å¾—ç¼–å†™å‰ç«¯ä»£ç å°±æ˜¯ä¸ªå¤§å‘ã€‚


æœ€è¿‘æ¥è§¦äº†ä¸€ä¸ªåŸºäº Django æ¡†æ¶ï¼Œå‰åç«¯ä¸åˆ†ç¦»çš„é¡¹ç›®ï¼Œå…³äºå¦‚ä½•ä¼˜é›…å¾—ç¼–å†™å‰ç«¯æˆ‘ä¹Ÿæƒ³äº†å¾ˆå¤šï¼Œæœ€ç»ˆèŠ±äº†ä¸€å¤©å¤šçš„æ—¶é—´æäº†ä¸€å¥—æ„Ÿè§‰è¿˜ç®—æ˜¯æ™®é€‚æ€§ä¸é”™ã€å®æ–½ä¹Ÿæ¯”è¾ƒç®€å•çš„æ–¹æ³•è®ºã€‚è¿™ç¯‡æ–‡ç« å°†ä¼šè®²è§£æˆ‘çš„æ€è·¯ï¼Œå¹¶ä¸”ä»¥ Django æ¡†æ¶ä¸ºä¾‹ç»™å‡º Demoã€‚


å½“ç„¶ï¼Œè¿™å¥—æ¶æ„è¿˜å¾ˆä¸å®Œå–„ï¼Œä½†å¯¹äºä¸­å°å‹é¡¹ç›®æ¥è¯´æ€»å½’æ˜¯åˆ©å¤§äºå¼Šçš„ã€‚


## ä¼ ç»Ÿæ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ


é¦–å…ˆæˆ‘ä»¬ä¼šæ–°å»ºä¸€ä¸ªåŸºç¡€çš„å¸ƒå±€æ–‡ä»¶ `base.html`:


```html
{% load static %}
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Demo</title>
  <link rel="icon" type="image/png" href="{% static 'favicon.ico' %}">
  <link rel="stylesheet" href="{% static 'css/reset.css' %}">
  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
  {% block styles %} {% endblock %}
</head>
<body>
  {% block content %} {% endblock %}

  <link rel="stylesheet" href="{% static 'js/jquery.min.js' %}">
  <link rel="stylesheet" href="{% static 'js/bootstrap.min.js' %}">
  {% block scripts %} {% endblock %}
</body>
</html>
```


æ¥ç€æˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªé¦–é¡µçš„æ¨¡æ¿æ–‡ä»¶ `index.html`ï¼Œå®ƒç»§æ‰¿äº†åŸºç¡€çš„æ¨¡æ¿ï¼š


```html
{% extends "../layouts/base.html" %}
{% load static %}

{% block styles %}
  <link rel="stylesheet" href="{% static 'css/index.css' %}">
{% endblock %}

{% block content %}
<div class="index">
  <div id="indexCarousel" class="carousel slide" data-ride="carousel">...</div>
  <button class="btn"></button>
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'js/index.js' %}"></script>
<script>
  $('.btn').click(function() { ... })
</script>
{% endblock %}
```


å½“åœ¨ `urls.py` é‡Œä¸º `index.html` åŠ ä¸Šè·¯ç”±ä¹‹åï¼Œé¡µé¢å°†è¢«æˆåŠŸåœ°è¿è¡Œèµ·æ¥ï¼Œç®€ç›´æ£’å‘†äº†â€”â€”å—ï¼Ÿ


## ç—›ç‚¹åœ¨å“ªé‡Œï¼Ÿ


ä¸Šé¢é‚£äº›çœ‹ä¼¼åˆæƒ…åˆç†çš„ä»£ç å…¶å®æœ‰éå¸¸å¤šçš„æ§½ç‚¹ã€‚


é¦–å…ˆï¼Œä½ çš„ä»£ç ç¼–è¾‘å™¨å¤§æ¦‚ç‡ä¼šå› ä¸ºæ‰¾ä¸åˆ° `$` å˜é‡è€Œæç¤ºä¸€ä¸ªæ³¢æµªçº¿ (å¦‚æœä½ çš„ç¼–è¾‘å™¨ä¸æ˜¯ Notepad æˆ–è€… Editplus çš„è¯)


å…¶æ¬¡ï¼Œé¡µé¢ä¸­çš„ CSS æ–‡ä»¶å’Œ JS ä»£ç éƒ½å¿…é¡»è€ƒè™‘æµè§ˆå™¨çš„å…¼å®¹æ€§ï¼Œè¿™æ„å‘³ç€ç»å¤§éƒ¨åˆ†æ–°é²œçš„è¯­æ³•éƒ½ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå¹¶ä¸”ä¼´éšç€å¤§é‡çš„ `-webkit-` å’Œ `var that = this`ã€‚


å†æ¬¡ï¼ŒJS é€»è¾‘å°†ä¼šæ¯«æ— ä¿ç•™å¾—å…¨éƒ¨æš´éœ²ï¼Œç½‘ç«™çš„å®‰å…¨æ€§å¤§æ‰“æŠ˜æ‰£ã€‚


æœ€åï¼Œå¦‚æœæ¯ä¸ªé¡µé¢å¼•å…¥çš„æ–‡ä»¶éƒ½ä¸ä¸€æ ·ï¼Œæ¯æ¬¡è¿›å…¥é¡µé¢å› ä¸ºåŠ è½½èµ„æºè€Œäº§ç”Ÿçš„ HTTP è¯·æ±‚æ•°é‡å°†ä¼šå¾ˆå¤šï¼Œå¤§å¹…å¢åŠ ç”¨æˆ·ç­‰å¾…æ—¶é—´ã€‚


## æ€æ ·æ‰ç®—ä¼˜é›…ï¼Ÿ

- æˆ‘æƒ³ç”¨ ES6ã€TSã€Vueã€Reactâ€¦â€¦
- æˆ‘æƒ³ç”¨ Sassã€Lessã€Stylusâ€¦â€¦
- æˆ‘æƒ³ç”¨ Prettierã€ESLintâ€¦â€¦
- æˆ‘æƒ³è‡ªåŠ¨æ··æ·†å‰ç«¯çš„å˜åŒ–åâ€¦â€¦
- æˆ‘æƒ³ç»™èµ„æºè‡ªåŠ¨æ·»åŠ ç‰ˆæœ¬å·â€¦â€¦
- æˆ‘è¿˜æƒ³å®ç°æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°ã€æ¨¡å—çƒ­é‡è½½â€¦â€¦

ä¸å¾—ä¸è¯´ï¼Œå¦‚ä»Šçš„å‰ç«¯å°±åƒä¸‰é‡Œå±¯çš„å§‘å¨˜ï¼ŒBlingBling çš„å¤–è¡¨æ¥æºäºä¸€ä¸‡ä¸ªç“¶ç“¶ç½ç½ï¼Œä½†å‡å¦‚å¥¹æŠŠå¦†å¸äº†ï¼Œä»–çš„ç”·æœ‹å‹åˆä¼šæ‚ç€è„¸è¯´ï¼šâ€œå—¨ï¼Œä½ è¿˜æ˜¯å…¨å‰¯æ­¦è£…çš„æ ·å­æ›´è¯±äººâ€ã€‚


## é‚£å°±ä¼˜é›…ä¸€æŠŠ


> ä¸ç®¡ä½ ä»£ç é•¿ä»€ä¹ˆæ ·ï¼Œåªè¦æˆ‘è®¤ï¼Œè¿™ä¸ªé¡µé¢å°±èƒ½è·‘ã€‚â€”â€”IE ä»¥å¤–çš„æµè§ˆå™¨


æ—¢ç„¶æœ‰äº†è¿™æ¡é“å¾‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åœ¨äº”èŠ±å…«é—¨çš„å„ç±»æ¨¡æ¿å¼•æ“ä¸­ï¼Œæƒ³åŠæ³•åŠ è½½é™æ€èµ„æºå°±å¯ä»¥äº†ã€‚è‡³äºæˆ‘ä»¬çš„æºç æ˜¯ TS è¿˜æ˜¯ JSï¼Œæ˜¯ Sass è¿˜æ˜¯ Lessï¼Œå›¾ç‰‡æ˜¯åœ¨çº¿åœ°å€è¿˜æ˜¯ Base 64 éƒ½æ— æ‰€è°“ã€‚æ„Ÿè°¢ Node.jsï¼ŒWebpackï¼ŒGulpâ€¦â€¦è™½ç„¶å¤§éƒ¨åˆ†æ—¶é—´æˆ‘éƒ½æ¨æ­»äº†å¥¹ä»¬ï¼Œä½†æœ‰äº†å¥¹ä»¬ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹å‰ç«¯èµ„æºä¸ºæ‰€æ¬²ä¸ºäº†ï¼


ä»¥ Django é¡¹ç›®ä¸ºä¾‹ï¼Œæˆ‘çš„æ€è·¯æ˜¯è¿™æ ·çš„ï¼š

- æ‰€æœ‰çš„å‰ç«¯èµ„æºéƒ½æ”¾åœ¨æ ¹ç›®å½•ä¸‹ï¼Œæ–¹ä¾¿é€šè¿‡ npm è¿›è¡Œç®¡ç†
- ä½¿ç”¨ Webpack ç­‰å·¥å…·å¯¹å‰ç«¯é¡¹ç›®è¿›è¡Œæ‰“åŒ…åï¼Œè‡ªåŠ¨è¾“å‡ºåˆ° `/project/static` ç›®å½•ä¸‹
- åŸºç¡€çš„å¸ƒå±€æ–‡ä»¶æ°¸è¿œåªå¼•å…¥ `static` ä¸‹å‡ ä¸ªæ‰“åŒ…åçš„èµ„æºæ–‡ä»¶
- å¯¹äºæŸäº›æ— æ³•è¢«æ‰“åŒ…å·¥å…·å¤„ç†çš„èµ„æºï¼Œç›´æ¥å¤åˆ¶åˆ° `static` ç›®å½•ä¸‹è¿›è¡Œå¼•ç”¨
- æ‰€æœ‰çš„ JS é€»è¾‘éƒ½å°½å¯èƒ½å¾—é€šè¿‡ Webpack è¿›è¡Œå¤„ç†ï¼Œé¡µé¢ä¸Šé€šè¿‡ä¸€ä¸ªåŠ è½½å™¨æ³¨å†Œå½“å‰é¡µé¢éœ€è¦çš„åŠŸèƒ½

è¿«äºè‡ªå·±çš„ Webpack èƒ½åŠ›å®åœ¨æ‰æ€¥ï¼Œæˆ‘é€‰ç”¨äº† [Laravel-Mix](https://laravel-mix.com/) æ¥å¤„ç†å‰ç«¯èµ„æºã€‚å®é™…ä¸Šè¿™ç§æ€è·¯å·²ç»ä¸å†æŒ‘æ¡†æ¶å’Œæ‰“åŒ…å·¥å…·äº†ï¼Œå¯ä»¥æŠŠ Django æ¢æˆå…¶ä»–ä»»æ„æ¡†æ¶ï¼ŒLaravel-Mix æ¢æˆè‡ªå·±æ‰‹åŠ¨é…ç½®çš„ Webpack å’Œ Gulpï¼Œéƒ½æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚


é¦–å…ˆå®‰è£…ä¸€äº›å¿…è¦çš„å‰ç«¯ä¾èµ–ï¼Œå¹¶ä¸”åˆ›å»ºåŸºç¡€çš„èµ„æºç›®å½•ã€‚


```bash
npm init -y
npm i -D laravel-mix prettier eslint ...
npm i jquery lodash bootstrap normalize.css ...

touch webpack.mix.js
mkdir -p resources/{js,scss}
```


åœ¨ `webpack.mix.js` ä¸­è¿›è¡ŒåŸºç¡€çš„ Laravel-Mix é…ç½®ã€‚è¯¦ç»†çš„é…ç½®å¯ä»¥å‚è€ƒ Laravel-Mix çš„å®˜æ–¹æ–‡æ¡£ã€‚


```javascript
const mix = require('laravel-mix');

const calcSrcPath = path => `./resources/${path}`;
const calcDistPath = path => `./jgmsys/static/${path}`;
// æ­¤å¤„è¯·æ ¹æ®è‡ªå·±çš„ ip åœ°å€è¿›è¡Œæ›¿æ¢ã€‚æœ¬æœºå¼€å‘ä¸€èˆ¬ä¸º localhost
// ç«¯å£ä¸ Django å¼€å‘ç¯å¢ƒçš„ç«¯å£å·ä¸€è‡´ã€‚å¦‚æœä½¿ç”¨äº† nginxï¼Œåˆ™ä¸è¯¥ç«™ç‚¹çš„ nginx ç«¯å£ä¸€è‡´
const djangoServer = '0.0.0.0:8000';

mix
  .js(calcSrcPath('js/bootstrap.js'), calcDistPath('js'))
  .js(calcSrcPath('js/app.js'), calcDistPath('js'))
  .sass(calcSrcPath('scss/app.scss'), calcDistPath('css'))
  .copy(calcSrcPath('favicon.ico'), calcDistPath('favicon.ico'))
  .copyDirectory(calcSrcPath('vendor'), calcDistPath('vendor'))
  .extract(['jquery', 'bootstrap', 'lodash', 'normalize.css', 'vue', 'popper.js']);

mix
  .setPublicPath(calcDistPath())
  .disableSuccessNotifications()
  .browserSync(djangoServer);

if (mix.inProduction()) mix.version();
```


åœ¨ `package.json` ä¸­æ·»åŠ  Laravel-Mix çš„ç›¸å…³è„šæœ¬ï¼Œæ­¤å¤„ä»…å†™å‡ºå‡ ä¸ªæœ€å¸¸ç”¨çš„ä½œä¸ºç¤ºä¾‹ã€‚å…¶ä»–è„šæœ¬è¯¦è§ Laravel-Mix å®˜ç½‘ã€‚


```json
"scripts": {
    "development": "cross-env NODE_ENV=development node_modules/webpack/bin/webpack.js --progress --hide-modules --config=node_modules/laravel-mix/setup/webpack.config.js",
    "watch": "npm run development -- --watch",
    "production": "cross-env NODE_ENV=production node_modules/webpack/bin/webpack.js --no-progress --hide-modules --config=node_modules/laravel-mix/setup/webpack.config.js"
},
```


åœ¨ `resources` ç›®å½•ä¸‹è‡ªç”±æ·»åŠ éœ€è¦è¢«å¤„ç†çš„å‰ç«¯èµ„æºï¼Œç„¶åè¿è¡Œ `npm run watch`ï¼Œå¦‚æœä½¿ç”¨äº† Laravel-Mix çš„ `browserSync` æœåŠ¡ï¼Œé‚£ä¹ˆåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ `ip:3000` å°±å¯ä»¥çœ‹åˆ°èƒ½å¤Ÿè‡ªåŠ¨çƒ­é‡è½½çš„é¡µé¢äº†ï¼


## å¦‚ä½•ç»„ç»‡å‰ç«¯èµ„æº


å½“æŠŠæ‰€æœ‰çš„åŸºå»ºå·¥ä½œéƒ½åšå®Œä¹‹åï¼Œå°±è¦è€ƒè™‘å¦‚ä½•æœ‰æ•ˆå¾—ç»„ç»‡èµ„æºã€‚ä¸‹é¢æ˜¯æˆ‘ç›®å‰æ­£åœ¨ä½¿ç”¨çš„é¡¹ç›®ç»“æ„ã€‚


```text
â”œâ”€â”€ favicon.ico
â”œâ”€â”€ iconfont
â”‚   â””â”€â”€ ...
â”œâ”€â”€ js
â”‚   â”œâ”€â”€ app.js
â”‚   â”œâ”€â”€ bootstrap.js
â”‚   â”œâ”€â”€ components
â”‚   â”‚   â””â”€â”€ HelloWorld.vue
â”‚   â”œâ”€â”€ features
â”‚   â”‚   â”œâ”€â”€ ChangeBgc.js
â”‚   â”‚   â””â”€â”€ main.js
â”‚   â””â”€â”€ loader.js
â”œâ”€â”€ scss
â”‚   â”œâ”€â”€ app.scss
â”‚   â”œâ”€â”€ _bootstrap.scss
â”‚   â”œâ”€â”€ _common.scss
â”‚   â”œâ”€â”€ _hack.scss
â”‚   â”œâ”€â”€ _iconfont.scss
â”‚   â”œâ”€â”€ layouts
â”‚   â”‚   â””â”€â”€ _base.scss
â”‚   â”œâ”€â”€ _mixins.scss
â”‚   â”œâ”€â”€ _reset.scss
â”‚   â”œâ”€â”€ _variables.scss
â”‚   â””â”€â”€ widgets
â”‚       â”œâ”€â”€ _footer.scss
â”‚       â””â”€â”€ _header.scss
â””â”€â”€ vendor
    â””â”€â”€ swiper
        â”œâ”€â”€ swiper.min.css
        â””â”€â”€ swiper.min.js
```


`app.scss` ç”¨äºæ³¨å†Œæ‰€æœ‰çš„æ ·å¼æ–‡ä»¶ã€‚å½“ç„¶ï¼Œå¦‚æœæœ‰å¤šä¸ªå¸ƒå±€ï¼Œå¯ä»¥è€ƒè™‘å¯¹å…¶è¿›è¡Œæ‹†åˆ†ã€‚


```scss
// resources
@import "variables";
@import "mixins";
@import "iconfont";
// reset
@import "~normalize.css/normalize.css";
@import "reset";
// libraries
@import "common";
@import "bootstrap";
// views
@import "layouts/base";
...
// hack
@import "hack";
```


`bootstrap.js` ç”¨äºæ³¨å†Œå…¨å±€éƒ½éœ€è¦ä½¿ç”¨çš„ã€éœ€è¦é¢„å…ˆåŠ è½½çš„åŠŸèƒ½æ¨¡å—ã€‚


```javascript
window._ = require('lodash');
window.$ = window.jQuery = require('jquery');
require('popper.js');
require('bootstrap');
```


`app.js` å’Œ `loader.js` éœ€è¦ç€é‡è®²è§£ä¸€ä¸‹ã€‚ä¸ºäº†èƒ½è®©æ‰€æœ‰çš„ JS é€»è¾‘éƒ½å°½å¯èƒ½å¾—è¢«æ‰“åŒ…å·¥å…·è¿›è¡Œå¤„ç†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æŠŠä¸åŒçš„åŠŸèƒ½æ‹†åˆ†æˆ JS æ¨¡å—åœ¨ `app.js` ä¸­ç»Ÿä¸€å¼•å…¥ã€‚ä½†æœ‰äº›åŠŸèƒ½å¯èƒ½ä»…ç”¨äºä¸€éƒ¨åˆ†é¡µé¢ï¼Œå¹¶ä¸”å¯èƒ½ä¼šå‡ºç°å¤ç”¨çš„æƒ…å†µï¼Œå› æ­¤æˆ‘ä»¬ä¸å¯èƒ½åªé å¼•å…¥ `app.js` è§£å†³æ‰€æœ‰é—®é¢˜ã€‚


æˆ‘ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š

- **æ‰€æœ‰çš„åŠŸèƒ½éƒ½åœ¨** **`app.js`** **ä¸­æ³¨å†Œï¼Œä½†å¹¶ä¸æ‰§è¡Œã€‚ä¸ºäº†å®ç°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬å¯ä»¥çº¦å®šæ¯ä¸€ä¸ªåŠŸèƒ½éƒ½å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°**
- **ä½•æ—¶è§¦å‘åŠŸèƒ½ï¼Œä»¥åŠè§¦å‘ä»€ä¹ˆåŠŸèƒ½éƒ½åœ¨é¡µé¢ä¸­è¿›è¡Œç»´æŠ¤**
- **é¡µé¢é€šè¿‡åŠ è½½å™¨** **`loader.js`** **åŠ è½½å½“å‰é¡µé¢éœ€è¦ç”¨åˆ°çš„åŠŸèƒ½ï¼Œå¾…é¡µé¢ onload åè‡ªåŠ¨è§¦å‘**

å¬èµ·æ¥å¾ˆå¤æ‚ï¼Œä½†å®é™…ä¸Šä»£ç å®ç°æ˜¯ç›¸å½“ç®€å•çš„ï¼š


`app.js`ã€‚å¼•å…¥æ‰€æœ‰ JS é€»è¾‘ã€‚


```javascript
// åŠŸèƒ½åŠ è½½å™¨
import './loader';
// æ‰€æœ‰çš„åŠŸèƒ½
import './features/main';
// Vue ç›¸å…³
import Vue from 'vue';
import HelloWorld from './components/HelloWorld';

new Vue({
  el: '#app',
  components: { HelloWorld }
});
```


`loader.js`ã€‚Features å†…åŠ è½½å…¨éƒ¨çš„åŠŸèƒ½æ¨¡å—ï¼Œæ¯ä¸ªé¡µé¢åªéœ€è¦åœ¨ `RegisteredFeatures` æ•°ç»„ä¸­ push åˆé€‚çš„åŠŸèƒ½æ¨¡å—ï¼Œé¡µé¢ onload åå°†è‡ªåŠ¨å…¨éƒ¨æ‰§è¡Œã€‚


```javascript
window.Features = {};
window.RegisteredFeatures = [];

window.onload = function() {
  window.RegisteredFeatures.forEach(feature => feature());
};
```


`features/main.js`ã€‚æ³¨å†Œå…¨é‡çš„åŠŸèƒ½æ¨¡å—ï¼Œæ¯ä¸€ä¸ªæ¨¡å—éƒ½å¿…é¡»æ˜¯ä¸€ä¸ªæ–¹æ³•ã€‚


```javascript
import { ChangeBgc } from './ChangeBgc';

window.Features.ChangeBgc = (...args) => {
  new ChangeBgc(...args);
};

window.Features.Demo = () => {
  console.log(`I'm just a demo...`);
};
```


`features/ChangeBgc.js`ã€‚è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨é¢å‘å¯¹è±¡çš„ä¾‹å­ã€‚


```javascript
import $ from 'jquery';

export class ChangeBgc {
  constructor(trigger, bgc) {
    this.bgc = bgc;
    $(trigger).click(this.triggeredClick.bind(this));
  }

  triggeredClick() {
    $('body').css('background-color', this.bgc);
  }
}
```


`layouts/base.html`ã€‚å¼•å…¥äº†æ‰“åŒ…åèµ„æºè·¯å¾„çš„æ¨¡æ¿æ–‡ä»¶ã€‚


```html
{% load static %}
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Demo</title>

  <link rel="icon" type="image/png" href="{% static 'favicon.ico' %}">
  <link rel="stylesheet" href="{% static 'css/app.css' %}">
  {% block styles %} {% endblock %}
</head>
<body>
  <!-- ä½œä¸º Vue çš„æ ¹å…ƒç´ ï¼Œè¿™ä¸ªæ ‡ç­¾å†…éƒ¨å¯ä»¥ä»»æ„ä½¿ç”¨å…¨å±€æ³¨å†Œçš„ Vue ç»„ä»¶ -->
  <div id="app">
    {% block content %} {% endblock %}
  </div>

  <script src="{% static 'js/manifest.js' %}"></script>
  <script src="{% static 'js/vendor.js' %}"></script>
  <script src="{% static 'js/bootstrap.js' %}"></script>
  <script src="{% static 'js/app.js' %}"></script>
  {% block scripts %} {% endblock %}
</body>
</html>
```


`index.html`ã€‚é¡¹ç›®çš„é¦–é¡µï¼Œå‡å®šéœ€è¦ä½¿ç”¨ `Demo` å’Œ `ChangeBgc` ä¸¤ä¸ªåŠŸèƒ½ï¼Œå› æ­¤åœ¨ `RegisteredFeatures` ä¸­ push ä¸¤ä¸ªæ–¹æ³•å³å¯ã€‚


```javascript
{% extends "../layouts/base.html" %}
{% load static %}

{% block content %}
<div class="index">
  <button class="btn">Change Bgc</button>
</div>
{% endblock %}

{% block scripts %}
<script>
  RegisteredFeatures.push(
    Features.Demo,
    function() { Features.ChangeBgc('.btn', '#ccc') }
  )
</script>
{% endblock %}
```


ç°åœ¨æ‰“å¼€é¡¹ç›®çš„é¦–é¡µï¼Œæ§åˆ¶å°å°†æ‰“å°æ¥è‡ª `Features.Demo` çš„ `I'm just a demo...`ï¼Œå¹¶ä¸”ç‚¹å‡»æŒ‰é’®åé¡µé¢çš„èƒŒæ™¯è‰²å°†å˜ä¸º `#ccc`ã€‚How Elegant!

