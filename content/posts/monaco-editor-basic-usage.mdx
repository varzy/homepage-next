---
title: 'Monaco Editor ç®€æ˜“æŒ‡å—'
category: 'Coding'
type: 'Post'
status: 'Published'
tags: ['Vue', 'Editor', 'JavaScript']
date: '2022-06-17'
slug: 'monaco-editor-basic-usage'
summary: ''
last_edited_time: '2024-03-16T08:21:00.000Z'
blog_last_fetched_time: '2025-08-06T03:15:10.242Z'
notion_id: 'a86430fb-e7ff-4bce-9622-c52966479444'
---

## æ˜¯ä»€ä¹ˆï¼Ÿ

[Monaco Editor](https://microsoft.github.io/monaco-editor/) æ˜¯ç”±å¾®è½¯å¼€æºçš„ Web ç«¯ç¼–è¾‘å™¨ï¼Œå®ƒåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ”¯æ’‘äº†å½“ä¸‹æœ€æµè¡Œçš„ä»£ç ç¼–è¾‘å™¨ VSCodeã€‚æˆ‘ä»¬åªéœ€è¦åœ¨ Web é¡¹ç›®å¼•å…¥ Monaco Editorï¼Œå°±å¯ä»¥è·å¾—å’Œ VSCode æ¥è¿‘çš„ç¼–è¾‘ä½“éªŒï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒå°åœ°å›¾ã€ä»£ç æ ¼å¼åŒ–ã€è¯­æ³•çº é”™ç­‰å„ç§éªšæ“ä½œã€‚

## å¦‚ä½•é˜…è¯»æ–‡æ¡£

ç‚¹å¼€ Monaco Editor çš„ [å®˜ç½‘](https://microsoft.github.io/monaco-editor)ï¼Œä¹çœ‹ä¹‹ä¸‹éå¸¸ç®€é™‹ï¼Œæˆ‘ä»¬ç”šè‡³æ— æ³•ç›´æ¥æ‰¾åˆ°å¦‚ä½•åˆå§‹åŒ–ç¼–è¾‘å™¨ï¼å› æ­¤åœ¨å¿«é€Ÿä¸Šæ‰‹ä¹‹å‰ï¼Œæˆ‘ä¼šå…ˆè®²è§£ä¸€ä¸‹å¦‚ä½•é˜…è¯» Monaco Editor çš„æ–‡æ¡£ã€‚

![SPOXtky8z6eFmI4.png](https://cdn.sa.net/2024/03/15/SPOXtky8z6eFmI4.png)

è®©æˆ‘ä»¬èšç„¦åˆ°å®˜ç½‘çš„å¯¼èˆªæ ï¼ŒAPI DOC åŒ…æ¶µäº† Monaco Editor çš„å…¨éƒ¨å‚æ•°ã€æ–¹æ³•ã€äº‹ä»¶ç­‰ï¼Œä»¥æ ‡å‡†çš„ TypeScript è¯­æ³•ç¼–å†™ï¼›PLAYGROUND ç»™å‡ºäº†ä¸€ç³»åˆ— Demoï¼›MONARCH åˆ™æ¼”ç¤ºäº†å¦‚ä½•è‡ªå®šä¹‰è¯­æ³•æ ¼å¼å’Œä»£ç é«˜äº®ã€‚

ç‚¹è¿› API DOCï¼Œä¼šçœ‹åˆ° Monaco Editor åˆ’åˆ†äº† `editor`ï¼Œ`languages`ï¼Œ`worker` ä¸‰ä¸ª Namespaceï¼š

- `editor` åŒ…å«ä¸€åˆ‡ç¼–è¾‘å™¨æœ‰å…³çš„è¡Œä¸ºï¼Œæ¯”å¦‚æ ·å¼ã€äº¤äº’ç­‰ï¼ŒåŸºæœ¬æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„ï¼›
- `languages` åŒ…å«ä¸€åˆ‡ç¼–ç¨‹è¯­è¨€ç›¸å…³çš„è¡Œä¸ºï¼Œæ¯”å¦‚è¯­æ³•é«˜äº®ã€æ³¨å†Œä¸€ç§æ–°çš„ç¼–ç¨‹è¯­è¨€ç­‰ï¼›
- `worker` åˆ™æ˜¯ Monaco Editor å¯ç”¨çš„å„ç§ Web Workerï¼Œæ¯”å¦‚ä»£ç è§£æå·¥ä½œå°±ä¼šä½¿ç”¨ Web Worker å¼‚æ­¥æ‰§è¡Œï¼Œä¸ä¼šå¯¹ç¼–è¾‘å™¨éƒ¨åˆ†é€ æˆå½±å“ã€‚

![5mEbVkLcjqyQZJA.png](https://cdn.sa.net/2024/03/15/5mEbVkLcjqyQZJA.png)

ä¸ªäººæ„Ÿè§‰å¯¹äºå¤§éƒ¨åˆ†å¼€å‘è€…ï¼Œåº”è¯¥åªä¼šç”¨åˆ° editor é‡Œçš„ APIğŸ¤£ã€‚ç‚¹å‡» `editor` å°±å¯ä»¥çœ‹åˆ°å„ç§ TypeScript å®šä¹‰äº†ï¼Œæ­¤å¤„ä»¥æˆ‘ä»¬ä¸€å®šä¼šç”¨åˆ°çš„ `monaco.editor.create` æ–¹æ³•ä¸ºä¾‹ï¼Œæ­¤æ–¹æ³•ç”¨æ¥åˆå§‹åŒ–ä¸€ä¸ªç¼–è¾‘å™¨å®ä¾‹ï¼Œç‚¹å‡» create å°±å¯ä»¥è·³è½¬åˆ°å¯¹åº”çš„æ–¹æ³•å®šä¹‰ä½ç½®ã€‚

![bVy8mIYouwlvRTj.png](https://cdn.sa.net/2024/03/15/bVy8mIYouwlvRTj.png)

å¯ä»¥çœ‹åˆ°ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ HTMLElementï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ `IStandaloneEditorConstructionOptions`ã€‚

![4FGPmLHf1IBDykV.png](https://cdn.sa.net/2024/03/15/4FGPmLHf1IBDykV.png)

ç‚¹å‡» `IStandaloneEditorConstructionOptions` å°±ä¼šè·³è½¬åˆ°å‚æ•°åˆ—è¡¨ï¼ŒæŒ‡æ˜ç¼–è¾‘å™¨æ¥å—å“ªäº›å‚æ•°ï¼Œä»¥åŠå‚æ•°çš„å¯é€‰å€¼ç­‰ã€‚

![QaMJ7YRSE3Zugqd.png](https://cdn.sa.net/2024/03/15/QaMJ7YRSE3Zugqd.png)

è€Œ create æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª `IStandaloneCodeEditor`ï¼Œè€Œå®ƒå…·å¤‡çš„ä¸€ç³»åˆ—äº‹ä»¶é‡Œï¼Œæˆ‘ä»¬æœ€å¸¸ç”¨çš„å¯èƒ½å°±æ˜¯ `onDidChangeModelContent`ï¼Œç¼–è¾‘å™¨å†…å®¹å˜æ›´å°±ä¼šè§¦å‘æ­¤äº‹ä»¶ã€‚

![dXJu2LHv5APFrmx.png](https://cdn.sa.net/2024/03/15/dXJu2LHv5APFrmx.png)

Monaco Editor çš„é…ç½®é¡¹èŒ«èŒ«å¤šï¼Œé¢å¯¹åƒå¥‡ç™¾æ€ªçš„éœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½å¾ˆéš¾é€šè¿‡æœç´¢å¼•æ“æ‰¾åˆ°é€‚åˆçš„è§£å†³æ–¹æ¡ˆï¼Œè¿™ç§æƒ…å†µä¸‹ä¹Ÿåªèƒ½å°è¯•å»çœ‹æ‡‚å’Œç†è§£ API DOC äº†ã€‚ç¨åæˆ‘ä¹Ÿä¼šå°è¯•åˆ—å‡ºä¸€äº›å¸¸ç”¨ APIã€‚

## å¿«é€Ÿä¸Šæ‰‹

é¦–å…ˆå®‰è£… Monaco Editorï¼š

```bash
npm install monaco-editor
// or
yarn add monaco-editor
```

å®‰è£…å®Œæ¯•åï¼Œæˆ‘ä»¬éœ€è¦æ‰¾ä¸€ä¸ªå…·æœ‰é«˜åº¦çš„ dom å®¹å™¨æ‰¿è½½ç¼–è¾‘å™¨ï¼š

```html
<div id="editor_container" style="height: 600px"></div>
```

æ¥ç€åˆå§‹åŒ–ç¼–è¾‘å™¨ï¼š

```javascript
import * as monaco from 'monaco-editor';

monaco.editor.create(document.getElementById('editor_container'), {
  // æ­¤å¤„çš„é…ç½®é¡¹å‡ ä¹ä¸ VSCode ä¸­çš„ä¸€è‡´
  automaticLayout: true,
  scrollBeyondLastLine: true,
  tabSize: 2,
});
```

æ­¤æ—¶å°±èƒ½åœ¨å±å¹•ä¸Šçœ‹åˆ°æœ€åŸºæœ¬çš„ç¼–è¾‘å™¨äº†~

æ³¨æ„ï¼`import * as monaco from 'monaco-editor'` å°†ä¼šå¼•å…¥**å…¨éƒ¨çš„è¯­è¨€å’Œç»„ä»¶**ï¼Œä½“ç§¯ä¼šå¾ˆå¤§ï¼Œå¦‚æœåªéœ€è¦ç”¨åˆ°ç¼–è¾‘å™¨çš„ä¸€éƒ¨åˆ†å†…å®¹ï¼Œå¯ä»¥æŒ‰éœ€å¼•å…¥ã€‚

```javascript
// å•ç‹¬å¼•å…¥ JSON è¯­è¨€çš„ Worker
import 'monaco-editor/esm/vs/language/json/json.worker';
// å•ç‹¬å¼•å…¥æŸ¥æ‰¾ç»„ä»¶
import 'monaco-editor/esm/vs/editor/contrib/find/browser/findController';
```

## åœ¨ Webpack (Vue) é¡¹ç›®ä¸­ä½¿ç”¨

å¦‚æœæˆ‘ä»¬çš„é¡¹ç›®ä½¿ç”¨ Webpack æ‰“åŒ…ï¼Œé‚£å¼•å…¥ Monaco Ediotr ååº”è¯¥ä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°è¿™æ ·çš„è­¦æŠ¥ã€‚

![OBnNDl9iuQry78H.png](https://cdn.sa.net/2024/03/15/OBnNDl9iuQry78H.png)

è¿™æ˜¯ç”±äº Webpack æ²¡æœ‰å¼•å…¥ Monoca Editor æ‰€éœ€çš„ WebWorkerã€‚ä¸Šé¢ä¹Ÿæåˆ°äº† **Monaco Editor ä¸ºäº†æé«˜æ€§èƒ½ï¼Œä¸åŒè¯­è¨€çš„è¯­æ³•è§£ææ“ä½œéƒ½ä¾èµ–å¯¹åº”çš„ worker**ï¼Œå¼•å…¥ worker åç¼–è¾‘å™¨æ‰èƒ½å®ç°è¯­æ³•é«˜äº®ã€ä»£ç æç¤ºç­‰éªšæ“ä½œã€‚

è§£å†³æ–¹æ¡ˆæ˜¯æˆ‘ä»¬å¯ä»¥åœ¨ Webpack çš„ `entry` ä¸­æ‰‹åŠ¨æ·»åŠ  workerï¼Œä½†è¿™ç§æ–¹æ¡ˆæ¯”è¾ƒéº»çƒ¦ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚æ›´ç®€å•çš„æ–¹æ¡ˆæ˜¯ç›´æ¥ä½¿ç”¨å®˜æ–¹æä¾›çš„ [monaco-editor-webpack-plugin](https://www.npmjs.com/package/monaco-editor-webpack-plugin) æ’ä»¶ï¼Œæ­¤å¤„ä»¥ VueCli ä¸ºä¾‹ã€‚

é¦–å…ˆå®‰è£…æ’ä»¶ï¼š

```javascript
npm i -D monaco-editor-webpack-plugin
// or
yarn add -D monaco-editor-webpack-plugin
```

æ¥ç€åœ¨ vue.config.js ä¸­æ·»åŠ é…ç½®ï¼š

```javascript
const { defineConfig } = require('@vue/cli-service');
const MonacoWebpackPlugin = require('monaco-editor-webpack-plugin');

module.exports = defineConfig({
  configureWebpack: {
    plugins: [
      new MonacoWebpackPlugin({
        languages: ['javascript', 'css', 'html', 'typescript', 'json'],
      }),
    ],
  },
});
```

å¦‚æœæˆ‘ä»¬é¡¹ç›®ä¸­çš„ç¼–è¾‘å™¨ä¸­åªéœ€è¦æ”¯æŒ javascript å’Œ jsonï¼Œå°±å¯ä»¥åªåœ¨æ•°ç»„ä¸­ä¿ç•™ `['javascript', 'json']` ä¸¤é¡¹ã€‚åŒæ ·çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªè¡Œæ·»åŠ æ›´å¤š workerï¼Œæ¯”å¦‚ sqlï¼Œä»¥å®ç° SQL è¯­æ³•çš„é«˜äº®å’Œæé†’ã€‚

## ç¼–ç¨‹è¯­è¨€æ”¯æŒ

ä»¥ JSON è¯­è¨€ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬æˆåŠŸå¼•å…¥ JSON è¯­è¨€çš„ worker åï¼Œå°±å¯ä»¥å¼€å¯å¯¹ JSON è¯­è¨€çš„æ›´å¤šæ”¯æŒã€‚ä½¿ç”¨èµ·æ¥ä¹Ÿéå¸¸ç®€å•ï¼š

```javascript
let $editor;
const jsonModel = monaco.editor.createModel(
  '', // åˆå§‹æ–‡æœ¬å†…å®¹
  'json', // è¯­è¨€ç±»å‹
);

$editor = monaco.editor.create(monacoEditorRef.value, {
  model: jsonModel,
  // ...
});
```

æ­¤æ—¶æˆ‘ä»¬ç¼–å†™ JSON ä»£ç æ—¶å°±å¯ä»¥è·å¾—æ›´å¥½çš„ä½“éªŒäº†ã€‚

![Kd7A3Bb8vJ9Yjki.png](https://cdn.sa.net/2024/03/15/Kd7A3Bb8vJ9Yjki.png)

## å¸¸ç”¨ API

- [monaco.editor.create()](https://microsoft.github.io/monaco-editor/api/modules/monaco.editor.html#create)
  - åˆå§‹åŒ–ä¸€ä¸ªç¼–è¾‘å™¨
- [monaco.editor.createModel()](https://microsoft.github.io/monaco-editor/api/modules/monaco.editor.html#createModel)
  - åˆ›å»ºä¸€ç§æ–‡æœ¬ Model
- [editor.getValue()](https://microsoft.github.io/monaco-editor/api/interfaces/monaco.editor.ICodeEditor.html#getValue)
  - è·å–å½“å‰æ–‡æœ¬æ¡†å†…å®¹
- [editor.updateOptions()](https://microsoft.github.io/monaco-editor/api/interfaces/monaco.editor.ICodeEditor.html#updateOptions)
  - æ›´æ–°ç¼–è¾‘å™¨é…ç½®é¡¹
- [editor.getSelection()](https://microsoft.github.io/monaco-editor/api/interfaces/monaco.editor.ICodeEditor.html#getSelection)
  - è·å–ç¼–è¾‘å™¨ä¸­é€‰ä¸­çš„æ–‡æœ¬
- [editor.getAction('editor.action.formatDocument').run()](https://microsoft.github.io/monaco-editor/api/interfaces/monaco.editor.ICodeEditor.html#getAction)
  - æ ¼å¼åŒ–ä»£ç 
- [editor.onDidChangeModelContent()](https://microsoft.github.io/monaco-editor/api/interfaces/monaco.editor.ICodeEditor.html#onDidChangeModelContent)
  - ç¼–è¾‘å™¨å†…å®¹æ”¹åŠ¨æ—¶è§¦å‘
